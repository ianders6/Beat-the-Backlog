<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- =====================================================
         META & PAGE CONFIGURATION
         ===================================================== -->

    <!-- UTF-8 ensures proper character rendering -->
    <meta charset="utf-8">

    <!-- Enables responsive layout on mobile devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Browser tab title -->
    <title>Beat the Backlog - Game Library</title>
    
    <!-- =====================================================
         BOOTSTRAP CSS
         ===================================================== -->

    <!-- 
      Bootstrap provides:
        - Responsive grid system
        - Cards, buttons, navbars
        - Utility spacing and typography classes
    -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    >
    
    <!-- =====================================================
         CUSTOM STYLESHEET
         ===================================================== -->

    <!-- 
      styles.css contains application-specific styling
      including dark theme overrides and game card styles.
    -->
    <link rel="stylesheet" href="css/styles.css">

    <!-- =====================================================
         FIREBASE SDKs
         ===================================================== -->

    <!-- 
      Firebase is included to:
        - Detect authentication state
        - Show/hide navbar links
        - Allow users to log games from the library
    -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js" defer></script>

  </head>
  
  <body>

    <!-- =====================================================
         NAVIGATION BAR
         ===================================================== -->

    <!-- 
      Shared navbar across the site.
      JavaScript toggles logged-in vs logged-out menus
      based on Firebase authentication state.
    -->
    <nav class="navbar navbar-expand navbar-dark bg-dark border-bottom border-secondary-subtle">
      <div class="container">

        <!-- Site logo / home link -->
        <a class="navbar-brand" href="home.html">Beat the Backlog</a>
        
        <div class="navbar-collapse" id="navbarNav">

          <!-- =================================================
               LOGGED-OUT NAV LINKS
               ================================================= -->

          <!-- Visible only when no user is authenticated -->
          <ul class="navbar-nav ms-auto align-items-center" id="nav-logged-out">
            <li class="nav-item">
              <a class="nav-link" href="login.html">Login</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="registration.html">Register</a>
            </li>

            <!-- Active page indicator -->
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="library.html">
                Games
              </a>
            </li>

            <!-- Game search form -->
            <li class="nav-item">
              <form class="d-flex" role="search" id="navbar-search-form">
                <input
                  class="form-control form-control-sm me-2"
                  type="search"
                  placeholder="Search"
                  aria-label="Search games"
                  id="navbar-search-input"
                  name="search"
                >
                <button class="btn btn-sm btn-outline-light" type="submit">
                  Search
                </button>
              </form>
            </li>
          </ul>

          <!-- =================================================
               LOGGED-IN NAV LINKS
               ================================================= -->

          <!-- Hidden by default; shown if user is logged in -->
          <ul class="navbar-nav ms-auto align-items-center d-none" id="nav-logged-in">
            <li class="nav-item">
              <a class="nav-link" href="dashboard.html">Dashboard</a>
            </li>

            <!-- Active page indicator -->
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="library.html">
                Games
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="settings.html">Settings</a>
            </li>

            <!-- Authenticated search -->
            <li class="nav-item ms-2">
              <form class="d-flex" role="search" id="navbar-search-form-auth">
                <input
                  class="form-control form-control-sm me-2"
                  type="search"
                  placeholder="Search"
                  aria-label="Search games"
                  id="navbar-search-input-auth"
                  name="search"
                >
                <button class="btn btn-sm btn-outline-light" type="submit">
                  Search
                </button>
              </form>
            </li>

            <!-- Quick log button -->
            <li class="nav-item ms-2">
              <a href="#" class="btn btn-primary btn-sm" id="log-a-game-btn">
                Log a Game
              </a>
            </li>

            <!-- Logout control -->
            <li class="nav-item ms-2">
              <button class="btn btn-sm btn-outline-secondary" id="logout-button">
                Logout
              </button>
            </li>
          </ul>

        </div>
      </div>
    </nav>
    <!-- END NAVBAR -->

    <!-- =====================================================
         MAIN LIBRARY CONTENT
         ===================================================== -->

    <main class="container my-5">

      <!-- Page title -->
      <header class="text-center mb-4">
        <h2>Game Library</h2>
      </header>

      <!-- =================================================
           SEARCH & FILTER CARD
           ================================================= -->

      <!-- 
        This section allows users to:
          - Search games by title
          - Filter by platform
          - Sort results
        Behavior is handled entirely by main.js
      -->
      <div class="card bg-dark border-secondary text-white mb-4">
        <div class="card-body">
          <h5 class="card-title">Search & Filter</h5>
          
          <!-- Filter form -->
          <form class="row g-3 align-items-end" id="library-filter-form">
            
            <!-- Text search -->
            <div class="col-lg-5 col-md-12">
              <label for="searchInput" class="form-label">
                Search by title
              </label>
              <input
                type="search"
                class="form-control bg-dark text-white border-secondary"
                id="searchInput"
                placeholder="Search by title..."
              >
            </div>
            
            <!-- Platform dropdown (dynamically populated) -->
            <div class="col-lg-3 col-md-6 col-6">
              <label for="platformFilter" class="form-label">
                Platform
              </label>
              <select
                class="form-select bg-dark text-white border-secondary"
                id="platformFilter"
              >
                <option value="">All Platforms</option>
                <!-- JavaScript injects platform options here -->
              </select>
            </div>
            
            <!-- Sort order selector -->
            <div class="col-lg-3 col-md-6 col-6">
              <label for="sortFilter" class="form-label">
                Sort by
              </label>
              <select
                class="form-select bg-dark text-white border-secondary"
                id="sortFilter"
              >
                <option value="-rating">Rating</option>
                <option value="name">Name (A-Z)</option>
                <option value="-name">Name (Z-A)</option>
                <option value="-released">Newest</option>
                <option value="released">Oldest</option>
              </select>
            </div>
            
            <!-- Submit filter button -->
            <div class="col-lg-1 col-md-12">
              <button type="submit" class="btn btn-primary w-100">
                Filter
              </button>
            </div>

          </form>
          <!-- END FILTER FORM -->

        </div>
      </div>
      <!-- END SEARCH & FILTER CARD -->

      <!-- =================================================
           GAME RESULTS GRID
           ================================================= -->

      <!-- 
        Game cards are injected here dynamically by JavaScript.
        Responsive grid adjusts based on screen size.
      -->
      <div
        class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4"
        id="game-library-display"
      >

        <!-- JavaScript-generated game cards appear here -->

      </div>
      <!-- END GAME GRID -->

    </main>
    <!-- END MAIN CONTENT -->

    <!-- =====================================================
         FOOTER
         ===================================================== -->

    <footer class="container text-center mt-5 py-4 border-top border-secondary-subtle">
      <ul class="list-inline mb-2">
        <li class="list-inline-item">
          <a href="about.html" class="text-secondary text-decoration-none">
            About Us
          </a>
        </li>
      </ul>
      <p class="text-secondary mb-0">&copy; 2025 Beat the Backlog</p>
    </footer>

    <!-- =====================================================
         JAVASCRIPT
         ===================================================== -->

    <!-- Bootstrap functionality (dropdowns, navbar, etc.) -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous">
    </script>
    
    <!-- 
      main.js responsibilities on this page:
        - Fetch games from external API
        - Populate platform filter
        - Render game cards
        - Handle filtering, sorting, and searching
        - Manage auth-based UI behavior
    -->
    <script src="js/main.js" defer></script>

  </body>
</html>
